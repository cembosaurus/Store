--------------------------------------------------------------------------------------------------------------------------------------------------------
----------------------------------------------------------------------- BATCH execution: ---------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------------------------------------------------

// run from ROOT 'Store' folder:

/// http://localhost:30010 --> log site



DOCKER:


docker build -t cembo/store_api_gateway -f api/api_gateway/Dockerfile .
docker push cembo/store_api_gateway
docker build -t cembo/store_identity -f api/Services.SYNC/identity/Dockerfile .
docker push cembo/store_identity
docker build -t cembo/store_inventory -f api/Services.SYNC/inventory/Dockerfile .
docker push cembo/store_inventory
docker build -t cembo/store_management -f api/management/Dockerfile .
docker push cembo/store_management
docker build -t cembo/store_metrics -f api/metrics/Dockerfile .
docker push cembo/store_metrics
docker build -t cembo/store_ordering -f api/Services.SYNC/ordering/Dockerfile .
docker push cembo/store_ordering
docker build -t cembo/store_payment -f api/Services.SYNC/payment/Dockerfile .
docker push cembo/store_payment
docker build -t cembo/store_scheduler -f api/Services.SYNC/scheduler/Dockerfile .
docker push cembo/store_scheduler
docker build -t cembo/store_static_content -f api/Services.SYNC/staticcontent/Dockerfile .
docker push cembo/store_static_content
docker build -t cembo/store_inventory_amqp_publisher -f api/Services.ASYNC/Inventory/AMQP/Client/Inventory.Publisher/Dockerfile .
docker push cembo/store_inventory_amqp_publisher
docker build -t cembo/store_inventory_amqp_consumer -f api/Services.ASYNC/Inventory/AMQP/Server/Inventory.Consumer/Dockerfile .
docker push cembo/store_inventory_amqp_consumer
docker image ls



K8:


//INGRESS controller initial installation before deployment:
kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.13.2/deploy/static/provider/aws/deploy.yaml       // install last version from: https://kubernetes.github.io/ingress-nginx/deploy/#docker-desktop
OR
kubectl apply -f k8s/ingress/ingress-controller-depl.v.1.13.2.yaml      // local version



* * *

kubectl apply -f k8s/namespace/store-namespace.yaml

kubectl apply -f k8s/management/management-hpa.yaml
kubectl apply -f k8s/management/management-service-depl.yaml

kubectl apply -f k8s/api_gateway/api-gateway-hpa.yaml
kubectl apply -f k8s/api_gateway/api-gateway-service-depl.yaml

kubectl apply -f k8s/metrics/metrics-hpa.yaml
kubectl apply -f k8s/metrics/metrics-pvc.yaml
kubectl apply -f k8s/metrics/metrics-mssql-depl.yaml
kubectl apply -f k8s/metrics/metrics-service-depl.yaml

kubectl apply -f k8s/logging/seq-secrets.yaml
kubectl apply -f k8s/Logging/seq-logging-pvc.yaml
kubectl apply -f k8s/Logging/seq-logging-service-depl.yaml

kubectl apply -f k8s/ingress/ingress-srv.yaml

kubectl apply -f k8s/db/db-secrets.yaml

kubectl apply -f k8s/services.async/inventory/consumer/inventory-amqp-pvc.yaml
kubectl apply -f k8s/services.async/inventory/consumer/inventory-amqp-mssql-depl.yaml
kubectl apply -f k8s/services.async/inventory/consumer/inventory-amqp-consumer-service-depl.yaml
kubectl apply -f k8s/services.async/inventory/publisher/inventory-amqp-publisher-service-depl.yaml

kubectl apply -f k8s/services.sync/payment/payment-hpa.yaml
kubectl apply -f k8s/services.sync/payment/payment-service-depl.yaml

kubectl apply -f k8s/services.sync/static_content/static-content-hpa.yaml
kubectl apply -f k8s/services.sync/static_content/static-content-service-depl.yaml

kubectl apply -f k8s/services.sync/ordering/ordering-hpa.yaml
kubectl apply -f k8s/services.sync/ordering/ordering-pvc.yaml
kubectl apply -f k8s/services.sync/ordering/ordering-mssql-depl.yaml
kubectl apply -f k8s/services.sync/ordering/ordering-service-depl.yaml

kubectl apply -f k8s/services.sync/scheduler/scheduler-hpa.yaml
kubectl apply -f k8s/services.sync/scheduler/scheduler-pvc.yaml
kubectl apply -f k8s/services.sync/scheduler/scheduler-mssql-depl.yaml
kubectl apply -f k8s/services.sync/scheduler/scheduler-service-depl.yaml

kubectl apply -f k8s/services.sync/identity/identity-hpa.yaml
kubectl apply -f k8s/services.sync/identity/identity-pvc.yaml
kubectl apply -f k8s/services.sync/identity/identity-mssql-depl.yaml
kubectl apply -f k8s/services.sync/identity/identity-service-depl.yaml

kubectl apply -f k8s/services.sync/inventory/inventory-hpa.yaml
kubectl apply -f k8s/services.sync/inventory/inventory-pvc.yaml
kubectl apply -f k8s/services.sync/inventory/inventory-mssql-depl.yaml
kubectl apply -f k8s/services.sync/inventory/inventory-service-depl.yaml

kubectl apply -f k8s/metrics/metrics-mssql-init-job.yaml
kubectl apply -f k8s/services.async/inventory/consumer/inventory-amqp-mssql-init-job.yaml
kubectl apply -f k8s/services.sync/ordering/ordering-mssql-init-job.yaml
kubectl apply -f k8s/services.sync/scheduler/scheduler-mssql-init-job.yaml
kubectl apply -f k8s/services.sync/identity/identity-mssql-init-job.yaml
kubectl apply -f k8s/services.sync/inventory/inventory-mssql-init-job.yaml

kubectl get pods -n store
kubectl get services -n store
kubectl get jobs -n store

* * * 

---


DELETE:

// delete ALL resources in STORE namespace:

kubectl delete namespace store

kubectl get pods -n store
kubectl get services -n store

OR:

// manually delete ALL resources:

kubectl delete ingress ingress-srv -n store
kubectl delete job identity-mssql-init -n store
kubectl delete job inventory-amqp-mssql-init -n store
kubectl delete job inventory-mssql-init -n store
kubectl delete job metrics-mssql-init -n store
kubectl delete job ordering-mssql-init -n store
kubectl delete job scheduler-mssql-init -n store
kubectl delete secret db-secrets -n store
kubectl delete secret seq-secrets -n store
kubectl delete deployment api-gateway-service-depl -n store
kubectl delete deployment identity-service-depl -n store
kubectl delete deployment inventory-service-depl -n store
kubectl delete deployment management-service-depl -n store
kubectl delete deployment metrics-service-depl -n store
kubectl delete deployment ordering-service-depl -n store
kubectl delete deployment payment-service-depl -n store
kubectl delete deployment scheduler-service-depl -n store
kubectl delete deployment static-content-service-depl -n store
kubectl delete deployment inventory-amqp-publisher-service-depl -n store
kubectl delete deployment inventory-amqp-consumer-service-depl -n store
kubectl delete deployment identity-mssql-depl -n store
kubectl delete deployment inventory-mssql-depl -n store
kubectl delete deployment metrics-mssql-depl -n store
kubectl delete deployment ordering-mssql-depl -n store
kubectl delete deployment scheduler-mssql-depl -n store
kubectl delete deployment inventory-amqp-mssql-depl -n store
kubectl delete deployment seq-logging-depl -n store
kubectl delete service api-gateway-clusterip-srv -n store
kubectl delete service identity-clusterip-srv -n store
kubectl delete service inventory-clusterip-srv -n store
kubectl delete service management-clusterip-srv -n store
kubectl delete service metrics-clusterip-srv -n store
kubectl delete service ordering-clusterip-srv -n store
kubectl delete service payment-clusterip-srv -n store
kubectl delete service scheduler-clusterip-srv -n store
kubectl delete service static-content-clusterip-srv -n store
kubectl delete service inventory-amqp-publisher-clusterip-srv -n store
kubectl delete service inventory-amqp-consumer-clusterip-srv -n store
kubectl delete service identity-mssql-clusterip-srv -n store
kubectl delete service inventory-mssql-clusterip-srv -n store
kubectl delete service metrics-mssql-clusterip-srv -n store
kubectl delete service ordering-mssql-clusterip-srv -n store
kubectl delete service scheduler-mssql-clusterip-srv -n store
kubectl delete service inventory-amqp-mssql-clusterip-srv -n store
kubectl delete service seq-logging-clusterip-srv -n store
kubectl delete service identity-mssql-loadbalancer  -n store
kubectl delete service inventory-mssql-loadbalancer -n store
kubectl delete service metrics-mssql-loadbalancer -n store
kubectl delete service ordering-mssql-loadbalancer  -n store
kubectl delete service scheduler-mssql-loadbalancer  -n store
kubectl delete service inventory-amqp-mssql-loadbalancer -n store
kubectl delete service inventory-amqp-mssql-loadbalancer -n store
kubectl delete service api-gateway-nodeport-srv -n store
kubectl delete service management-nodeport-srv -n store
kubectl delete service metrics-nodeport-srv -n store
kubectl delete service identity-nodeport-srv -n store
kubectl delete service inventory-nodeport-srv -n store
kubectl delete service inventory-amqp-consumer-nodeport-srv -n store
kubectl delete service inventory-amqp-consumer-mssql-clusterip-srv -n store
kubectl delete service inventory-amqp-consumer-mssql-loadbalancer -n store
kubectl delete service inventory-amqp-publisher-nodeport-srv -n store
kubectl delete service rabbitmq-nodeport-srv -n store
kubectl delete service ordering-nodeport-srv -n store
kubectl delete service payment-nodeport-srv -n store
kubectl delete service scheduler-nodeport-srv -n store
kubectl delete service static-content-nodeport-srv -n store
kubectl delete service seq-logging-nodeport-srv -n store
kubectl delete pvc identity-mssql-claim -n store
kubectl delete pvc inventory-mssql-claim -n store
kubectl delete pvc metrics-mssql-claim -n store
kubectl delete pvc ordering-mssql-claim -n store
kubectl delete pvc scheduler-mssql-claim -n store
kubectl delete pvc inventory-amqp-mssql-claim -n store
kubectl delete pvc seq-pvc -n store
kubectl delete secret identity-mssql -n store
kubectl delete secret inventory-mssql -n store
kubectl delete secret metrics-mssql -n store
kubectl delete secret ordering-mssql -n store
kubectl delete secret scheduler-mssql -n store
kubectl delete secret seq-admin-secret -n store
kubectl delete secret inventory-amqp-mssql -n store
kubectl delete hpa api-gateway-hpa -n store
kubectl delete hpa management-hpa -n store
kubectl delete hpa metrics-hpa -n store
kubectl delete hpa identity-hpa -n store
kubectl delete hpa inventory-hpa -n store
kubectl delete hpa ordering-hpa -n store
kubectl delete hpa payment-hpa -n store
kubectl delete hpa scheduler-hpa -n store
kubectl delete hpa static-content-hpa -n store
kubectl get pods -n store
kubectl get services -n store

---

--------------------------------------------------------------------------------------------------------------------------------------------------------
----------------------------------------------------------------------- PULL images from HUB: ----------------------------------------------------------
--------------------------------------------------------------------------------------------------------------------------------------------------------

docker pull cembo/store_api_gateway
docker pull cembo/store_identity
docker pull cembo/store_inventory
docker pull cembo/store_management
docker pull cembo/store_metrics
docker pull cembo/store_ordering
docker pull cembo/store_payment
docker pull cembo/store_scheduler
docker pull cembo/store_static_content
docker pull cembo/store_inventory_amqp_publisher
docker pull cembo/store_inventory_amqp_consumer
